- [C语言介绍](#C语言介绍)

# 学习准备

> 注：本笔记来源课程是B站[李慧琴C语言教程](https://www.bilibili.com/video/BV18p4y167Md)。

## C语言介绍

C语言发展史：

- 1960：原型A语言 -> ALGOL语言
- 1963：CPL语言
- 1967：BCPL
- 1970：B语言
- 1973：C语言

C语言特点：

1. 基础性语言
2. 语法简洁、紧凑、方便灵活（指针的存在）
3. 运算符、数据结构丰富
4. 结构化、模块化编程（主要依赖于函数）
5. 移植性好，执行效率高
6. 允许直接对硬件操作

## 学习建议

1. 掌握正确的概念
2. 多动手写
3. 阅读优秀的程序段
4. 面试题，项目

## 讲解思路

1. 基本概念 
2. 数据类型、运算符、表达式
3. 输入输出专题
4. 流程控制
5. **数组**
6. **指针**
7. **函数**
8. 构造类型
9. 动态内存管理
10. 调试工具和调试技巧（gdb、make）
11. 常用库函数（封装）

# 第一个小程序

创建一个文件hello.c，内容如下：

```c
#include <stdio.h>
#include <stdlib.h>

int main(){
	printf("Hello World!");
	exit(0);
}
```

`#include` 的作用是预定义文件。`<stdio.h>` 和`<stdlib.h>`是常用的两个库文件。main函数是整个程序的入口。

> exit()与return（）的区别

## C文件的生成过程

C源文件可以通过`gcc编译器`来生成，主要步骤：

```mermaid
graph LR;
	C源文件 --> 预处理 --> 编译 --> 汇编 --> 链接 --> 可执行文件;
```

### 1.预处理

```
gcc -E hello.c > hello.i
```

预处理阶段会对各种预处理指令（**#include、#define、#ifdef 等#开始的代码行**）进行处理，删除注释和多余的空白字符，生成一份新的代码。

以`#`开头的语句都是在预处理阶段。如`hello.c`中的`#include <stdio.h>`。

上述语句意思是将`hello.c`文件经过预处理并保存为当前文件夹下的`hello.i`。

如果不加 `> hello.i`，则默认将预处理后的程序输出到终端。

### 2.编译

```c
gcc -S hello.i
```

对代码进行语法、语义分析和错误判断，生成名为`hello.s`的汇编文件。

### 3.汇编

```c
gcc -C hello.s -o hello.o
```

把汇编代码转换成计算机可执行二进制目标文件`hello.o`。如果不指定生成的文件名，则默认生成`a.out`文件。

此时内容已经不是可读形式了，但可以使用下列指令查看：

```c
readelf -a hello.o
```

[pic](./images/Snipaste_2020-11-23_16-50-15.png)

### 4.链接

```c
gcc hello.o -o hello
```

通俗的讲就是把多个*.o文件合并成一个可执行文件，生成名为`hello`的可执行文件。我们也可以对这个文件进行readelf操作，也可以进行**二进制指令转汇编**的操作：

```c
objdump -d hello
```

### 简洁写法

```c
gcc hello.c -o hello
```

这一步可以直接编译生成可执行文件。或者使用make来编译：

```c
make filename  /*等同于cc filename.c -o filename*/
```

make后需要加不带后缀的文件名。

